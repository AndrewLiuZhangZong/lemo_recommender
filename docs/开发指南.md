# Lemoæ¨èç³»ç»Ÿ - å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£åŒ…å«é¡¹ç›®å¼€å‘è®¡åˆ’ã€æ¶æ„è®¾è®¡ã€æŠ€æœ¯è§„èŒƒå’Œå¼€å‘æŒ‡å—ã€‚

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#æ ¸å¿ƒè®¾è®¡åŸåˆ™)
3. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
4. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
5. [å¼€å‘é˜¶æ®µè§„åˆ’](#å¼€å‘é˜¶æ®µè§„åˆ’)
6. [æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹](#æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹)
7. [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
8. [å·²å®ŒæˆåŠŸèƒ½æ¨¡å—](#å·²å®ŒæˆåŠŸèƒ½æ¨¡å—)
9. [å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ](#å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ)
10. [éƒ¨ç½²å’Œæµ‹è¯•](#éƒ¨ç½²å’Œæµ‹è¯•)

---

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Lemoæ¨èç³»ç»Ÿ  
**é¡¹ç›®å®šä½**: å¤šåœºæ™¯SaaSæ¨èç³»ç»Ÿï¼Œæ”¯æŒvlogã€æ–°é—»ã€ç”µå•†ã€éŸ³ä¹ç­‰å¤šç§ä¸šåŠ¡åœºæ™¯  
**æ¶æ„æ¨¡å¼**: å‰åç«¯åˆ†ç¦» + å¾®æœåŠ¡  

### æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- Vue3 + TypeScript
- Arco Design UI
- Axios + defHttp

**åç«¯**:
- Go (Ginæ¡†æ¶) - service_manager APIç½‘å…³
- Python (FastAPI + gRPC) - lemo_recommenderæ¨èæœåŠ¡
- PyTorch - æ·±åº¦å­¦ä¹ æ¨¡å‹
- Celery - å¼‚æ­¥ä»»åŠ¡è°ƒåº¦

**æ•°æ®å­˜å‚¨**:
- MongoDB - ä¸»æ•°æ®åº“ï¼ˆåœºæ™¯ã€ç‰©å“ã€ç”¨æˆ·ç”»åƒã€å®éªŒï¼‰
- MySQL - æ•°æ®å­—å…¸è¡¨
- Redis - ç¼“å­˜å±‚
- Milvus - å‘é‡æ•°æ®åº“
- ClickHouse - OLAPåˆ†æï¼ˆFlinkå†™å…¥ï¼‰

**æ¶ˆæ¯é˜Ÿåˆ—**:
- Kafka - è¡Œä¸ºæ•°æ®æµ

**æµå¤„ç†**:
- Flink (PyFlink) - å®æ—¶ç‰¹å¾è®¡ç®—

**éƒ¨ç½²**:
- Docker + Docker Compose
- Kubernetes (K3s)

**ç›‘æ§**:
- Prometheus + Grafana
- ELK Stack (å¯é€‰)

---

## æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **å¤šç§Ÿæˆ·éš”ç¦»**: æ‰€æœ‰æ•°æ®æŒ‰`tenant_id`å®Œå…¨éš”ç¦»ï¼Œç¡®ä¿SaaSå®‰å…¨æ€§
2. **åœºæ™¯æŠ½è±¡**: é€šè¿‡é…ç½®åŒ–æ”¯æŒä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œé¿å…ç¡¬ç¼–ç 
3. **ç®—æ³•æ’ä»¶åŒ–**: ç®—æ³•æ¨¡å—å¯æ’æ‹”ã€å¯ç»„åˆï¼Œæ”¯æŒçƒ­æ›´æ–°
4. **å¯è§‚æµ‹æ€§**: å®Œå–„çš„ç›‘æ§ã€æ—¥å¿—ã€é“¾è·¯è¿½è¸ªä½“ç³»
5. **é«˜æ€§èƒ½**: æ”¯æŒé«˜å¹¶å‘ã€ä½å»¶è¿Ÿå“åº”ï¼ˆP99 < 100msï¼‰
6. **APIç½‘å…³æ¨¡å¼**: å‰ç«¯åªä¸service_manageré€šä¿¡ï¼Œä¸ç›´æ¥è°ƒç”¨lemo_recommender
7. **è‡ªåŠ¨IDç”Ÿæˆ**: æ‰€æœ‰èµ„æºIDç”±åç«¯è‡ªåŠ¨ç”Ÿæˆï¼ˆMongoDB ObjectIDï¼‰

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„

```
å‰ç«¯(Vue3) â†’ service_manager(Goç½‘å…³) â†’ lemo_recommender(Python gRPCæœåŠ¡)
                    â†“                              â†“
              andrew-file(æ–‡ä»¶æœåŠ¡)         MongoDB + Redis
                                                  â†“
                                            Kafka + Flink
                                                  â†“
                                            ClickHouse (OLAP)
```

### æ•°æ®æµæ¶æ„

```
ç”¨æˆ·è¡Œä¸º â†’ Kafka â†’ Flinkå®æ—¶è®¡ç®— â†’ Redis/MongoDB/ClickHouse
                      â†“
                  å®æ—¶ç‰¹å¾æ›´æ–°
                      â†“
                 æ¨èå¼•æ“ä½¿ç”¨
```

### æ¨èé“¾è·¯

```
è¯·æ±‚ â†’ åœºæ™¯è·¯ç”± â†’ å¤šè·¯å¬å› â†’ ç²—æ’ â†’ ç²¾æ’ â†’ é‡æ’ â†’ ç»“æœè¿”å›
         â†“          â†“        â†“     â†“     â†“
      é…ç½®åŠ è½½   çƒ­é—¨/ååŒ/  è§„åˆ™  æ¨¡å‹  å¤šæ ·æ€§
                 å‘é‡å¬å›    æ‰“åˆ†  æ‰“åˆ†  è¿‡æ»¤
```

---

## é¡¹ç›®ç»“æ„

### GoæœåŠ¡ (service_manager)

```
service_manager_server/
â”œâ”€â”€ app/admin/recommender/  # æ¨èç³»ç»ŸHTTPæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ model.go           # æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ template.go        # æ¨¡æ¿ç®¡ç†
â”‚   â”œâ”€â”€ scenario.go        # åœºæ™¯ç®¡ç†
â”‚   â”œâ”€â”€ item.go            # ç‰©å“ç®¡ç†
â”‚   â”œâ”€â”€ experiment.go      # ABå®éªŒç®¡ç†
â”‚   â””â”€â”€ dataset.go         # æ•°æ®é›†ç®¡ç†
â”œâ”€â”€ rpc/                   # gRPCå®¢æˆ·ç«¯
â”‚   â””â”€â”€ recommender_clients.go
â””â”€â”€ route/
    â””â”€â”€ router.go          # è·¯ç”±é…ç½®
```

### PythonæœåŠ¡ (lemo_recommender)

```
lemo_recommender/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/               # FastAPIè·¯ç”±ï¼ˆV1ç‰ˆæœ¬ï¼‰
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â”œâ”€â”€ behavior.py
â”‚   â”‚       â”œâ”€â”€ item.py
â”‚   â”‚       â”œâ”€â”€ recommendation.py
â”‚   â”‚       â”œâ”€â”€ scenario.py
â”‚   â”‚       â”œâ”€â”€ experiment.py
â”‚   â”‚       â””â”€â”€ model_training.py
â”‚   â”œâ”€â”€ models/            # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ behavior.py
â”‚   â”‚   â”œâ”€â”€ item.py
â”‚   â”‚   â”œâ”€â”€ scenario.py
â”‚   â”‚   â”œâ”€â”€ experiment.py
â”‚   â”‚   â””â”€â”€ user_profile.py
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ behavior/
â”‚   â”‚   â”œâ”€â”€ item/
â”‚   â”‚   â”œâ”€â”€ recommendation/
â”‚   â”‚   â”œâ”€â”€ scenario/
â”‚   â”‚   â”œâ”€â”€ experiment/
â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ dataset/
â”‚   â”‚   â””â”€â”€ model/
â”‚   â”œâ”€â”€ engine/            # æ¨èå¼•æ“
â”‚   â”‚   â”œâ”€â”€ recall/        # å¬å›å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hot_items.py
â”‚   â”‚   â”‚   â”œâ”€â”€ collaborative_filtering.py
â”‚   â”‚   â”‚   â””â”€â”€ vector_search.py
â”‚   â”‚   â”œâ”€â”€ ranker/        # æ’åºå±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â””â”€â”€ simple_ranker.py
â”‚   â”‚   â””â”€â”€ reranker/      # é‡æ’å±‚
â”‚   â”‚       â”œâ”€â”€ base.py
â”‚   â”‚       â””â”€â”€ diversity.py
â”‚   â”œâ”€â”€ ml/                # æ·±åº¦å­¦ä¹ æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ wide_deep.py
â”‚   â”‚   â”‚   â”œâ”€â”€ deepfm.py
â”‚   â”‚   â”‚   â””â”€â”€ two_tower.py
â”‚   â”‚   â”œâ”€â”€ trainer.py     # æ¨¡å‹è®­ç»ƒå™¨
â”‚   â”‚   â”œâ”€â”€ model_server.py # æ¨¡å‹æœåŠ¡
â”‚   â”‚   â””â”€â”€ model_registry.py # æ¨¡å‹æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ grpc_server/       # gRPCæœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ behavior_service.py
â”‚   â”‚       â”œâ”€â”€ item_service.py
â”‚   â”‚       â”œâ”€â”€ scenario_service.py
â”‚   â”‚       â”œâ”€â”€ experiment_service.py
â”‚   â”‚       â””â”€â”€ model_service.py
â”‚   â”œâ”€â”€ tasks/             # Celeryå¼‚æ­¥ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ celery_app.py
â”‚   â”‚   â”œâ”€â”€ item_tasks.py
â”‚   â”‚   â”œâ”€â”€ user_tasks.py
â”‚   â”‚   â”œâ”€â”€ model_tasks.py
â”‚   â”‚   â””â”€â”€ recommendation_tasks.py
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database.py    # MongoDBå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ kafka.py       # Kafkaç”Ÿäº§è€…/æ¶ˆè´¹è€…
â”‚   â”‚   â”œâ”€â”€ milvus_client.py # Milvuså®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ metrics.py     # PrometheusæŒ‡æ ‡
â”‚   â””â”€â”€ utils/             # å·¥å…·ç±»
â”‚       â”œâ”€â”€ circuit_breaker_decorator.py
â”‚       â”œâ”€â”€ rate_limiter.py
â”‚       â””â”€â”€ performance.py
â”œâ”€â”€ flink_jobs/            # Flinkå®æ—¶ä½œä¸š
â”‚   â”œâ”€â”€ user_profile_updater.py
â”‚   â”œâ”€â”€ item_hot_score_calculator.py
â”‚   â””â”€â”€ recommendation_metrics.py
â””â”€â”€ scripts/               # è„šæœ¬
    â”œâ”€â”€ init_db.py
    â”œâ”€â”€ init_milvus.py
    â””â”€â”€ run_grpc_server.py
```

### å‰ç«¯ (service_manager_web/admin)

```
src/views/recommender/
â”œâ”€â”€ model/                 # æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ Create.vue
â”‚   â””â”€â”€ components/
â”œâ”€â”€ template/              # æ¨¡æ¿ç®¡ç†
â”œâ”€â”€ scenario/              # åœºæ™¯ç®¡ç†
â”œâ”€â”€ item/                  # ç‰©å“ç®¡ç†
â””â”€â”€ experiment/            # ABå®éªŒç®¡ç†
```

---

## å¼€å‘é˜¶æ®µè§„åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ä¸æ ¸å¿ƒåŠŸèƒ½ (4-6å‘¨) âœ…

#### Week 1-2: é¡¹ç›®åˆå§‹åŒ–ä¸åŸºç¡€æ¡†æ¶ âœ…

**1. é¡¹ç›®ç»“æ„æ­å»º** âœ…
- [x] åˆ›å»ºæ ‡å‡†é¡¹ç›®ç»“æ„ï¼ˆåˆ†å±‚æ¶æ„ï¼‰
- [x] é…ç½®Poetryä¾èµ–ç®¡ç†
- [x] è®¾ç½®Dockerå¼€å‘ç¯å¢ƒ
- [x] é…ç½®ä»£ç è´¨é‡å·¥å…·ï¼ˆBlackã€Flake8ã€MyPyï¼‰
- [x] é…ç½®Pytestæµ‹è¯•æ¡†æ¶

**2. æ•°æ®æ¨¡å‹è®¾è®¡ï¼ˆMongoDBï¼‰** âœ…
- [x] è®¾è®¡MongoDB Collectionç»“æ„
  - åœºæ™¯é…ç½®é›†åˆï¼ˆscenariosï¼‰
  - ç‰©å“é›†åˆï¼ˆitemsï¼‰
  - ç”¨æˆ·ç”»åƒé›†åˆï¼ˆuser_profilesï¼‰
  - è¡Œä¸ºæ—¥å¿—é›†åˆï¼ˆinteractionsï¼‰
  - æ¨¡å‹é…ç½®é›†åˆï¼ˆmodel_configsï¼‰
  - ABå®éªŒé›†åˆï¼ˆexperimentsï¼‰
- [x] åˆ›å»ºç´¢å¼•ç­–ç•¥ï¼ˆtenant_id, scenario_idç­‰ï¼‰
- [x] è®¾è®¡ç»Ÿä¸€çš„åœºæ™¯é…ç½®Schemaï¼ˆæ”¯æŒvlogã€æ–°é—»ç­‰åœºæ™¯ï¼‰

**3. åŸºç¡€æœåŠ¡æ­å»º** âœ…
- [x] FastAPIåº”ç”¨åˆå§‹åŒ–
- [x] MongoDBé›†æˆï¼ˆMotorå¼‚æ­¥é©±åŠ¨ï¼‰
- [x] Redisé›†æˆï¼ˆè¿æ¥æ± ã€ç¼“å­˜å·¥å…·ç±»ï¼‰
- [x] ç»Ÿä¸€å“åº”æ ¼å¼å®šä¹‰
- [x] å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶
- [x] è¯·æ±‚ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆtenant_idã€user_idã€request_idï¼‰

#### Week 3-4: æœåŠ¡å¯¹æ¥ä¸åœºæ™¯ç®¡ç† âœ…

**1. å¤–éƒ¨æœåŠ¡å¯¹æ¥** âœ…
- [x] å®šä¹‰ä¸ç½‘å…³æœåŠ¡çš„æ¥å£åè®®ï¼ˆè¯·æ±‚å¤´è§„èŒƒï¼‰
- [x] å®ç°ç§Ÿæˆ·/ç”¨æˆ·æœåŠ¡çš„gRPCå®¢æˆ·ç«¯æ¡†æ¶
- [x] ç§Ÿæˆ·ä¿¡æ¯ç¼“å­˜æœºåˆ¶ï¼ˆé¢„ç•™ï¼‰
- [x] è¯·æ±‚éªŒè¯ä¸­é—´ä»¶ï¼ˆéªŒè¯tenant_idå’Œuser_idï¼‰

**2. åœºæ™¯ç®¡ç†ï¼ˆé…ç½®åŒ–ï¼Œæ— éœ€ç¡¬ç¼–ç ï¼‰** âœ…
- [x] åœºæ™¯CRUD API
- [x] åœºæ™¯é…ç½®Schemaå®šä¹‰ï¼ˆé€šç”¨JSON Schemaï¼‰
  - ç‰¹å¾é…ç½®ï¼šitem_features, user_features, context_features
  - å¬å›ç­–ç•¥é…ç½®ï¼šå¤šè·¯å¬å›æƒé‡å’Œå‚æ•°
  - æ’åºæ¨¡å‹é…ç½®ï¼šæ¨¡å‹ç±»å‹å’Œç‰ˆæœ¬
  - é‡æ’è§„åˆ™é…ç½®ï¼šå¤šæ ·æ€§ã€æ–°é²œåº¦ç­‰
- [x] åœºæ™¯é…ç½®æ¨¡æ¿
  - vlogåœºæ™¯æ¨¡æ¿ï¼ˆè§†é¢‘æ—¶é•¿ã€å®Œæ’­ç‡ç­‰ç‰¹å¾ï¼‰
  - æ–°é—»åœºæ™¯æ¨¡æ¿ï¼ˆæ—¶æ•ˆæ€§ã€åœ°åŸŸæ€§ç­‰ç‰¹å¾ï¼‰
- [x] åœºæ™¯é…ç½®éªŒè¯å™¨
- [x] åœºæ™¯åŠ¨æ€è·¯ç”±ï¼ˆæ ¹æ®scenario_idåŠ è½½é…ç½®ï¼‰

**3. ç‰©å“ç®¡ç†ä¸è¡Œä¸ºé‡‡é›†** âœ…
- [x] ç‰©å“ç®¡ç†APIï¼ˆCRUDã€æ‰¹é‡å¯¼å…¥ã€æœç´¢ï¼‰
- [x] ç‰©å“å…ƒæ•°æ®å­˜å‚¨ï¼ˆæ”¯æŒå¼‚æ„å­—æ®µï¼‰
- [x] ç”¨æˆ·ç”»åƒè¡¨è®¾è®¡ä¸å®ç°
- [x] ç”¨æˆ·è¡Œä¸ºä¸ŠæŠ¥APIï¼ˆå•ä¸ª+æ‰¹é‡ï¼‰

#### Week 5-6: åŸºç¡€æ¨èå¼•æ“ âœ…

**1. æ¨èç®—æ³•å®ç°** âœ…
- [x] ååŒè¿‡æ»¤ï¼ˆUserCFã€ItemCFï¼‰
- [x] çƒ­é—¨æ¨èï¼ˆé¢„ç•™Flinkå®æ—¶è®¡ç®—é›†æˆç‚¹ï¼‰
- [x] å‘é‡å¬å›ï¼ˆé¢„ç•™Milvusé›†æˆç‚¹ï¼‰
- [x] æ··åˆæ¨èç­–ç•¥ï¼ˆå¤šè·¯å¬å›åˆå¹¶ï¼‰

**2. æ¨èæœåŠ¡API** âœ…
- [x] ç»Ÿä¸€æ¨èæ¥å£è®¾è®¡
- [x] åœºæ™¯è·¯ç”±ä¸ç®—æ³•é€‰æ‹©ï¼ˆé…ç½®é©±åŠ¨ï¼‰
- [x] ç»“æœè¿‡æ»¤ä¸å»é‡
- [x] æ¨èè°ƒè¯•ä¿¡æ¯ï¼ˆdebugæ¨¡å¼ï¼‰

**3. ç¼“å­˜ç­–ç•¥** ğŸš§
- [x] æ¨èç»“æœç¼“å­˜ï¼ˆæ¥å£é¢„ç•™ï¼‰
- [x] ç”¨æˆ·ç”»åƒç¼“å­˜ï¼ˆæ¥å£é¢„ç•™ï¼‰
- [x] çƒ­é—¨ç‰©å“ç¼“å­˜ï¼ˆæ¥å£é¢„ç•™ï¼‰
- [ ] ç¼“å­˜å¤±æ•ˆç­–ç•¥ï¼ˆå¾…å®ç°ï¼‰

**4. æ€§èƒ½ä¼˜åŒ–** âœ…
- [x] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ï¼ˆinit_db.pyï¼‰
- [x] æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼ˆget_items_by_idsï¼‰
- [x] å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼ˆCeleryæ¡†æ¶æ­å»ºï¼‰

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§ç‰¹æ€§ä¸æ‰©å±• (4-6å‘¨) âœ…

#### Week 7-8: ç‰¹å¾å·¥ç¨‹ä¸å‘é‡åŒ– âœ…

**1. ç‰¹å¾æå–æ¡†æ¶** ğŸš§
- [ ] é€šç”¨ç‰¹å¾æå–æ¥å£ï¼ˆå¾…æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
- [ ] vlogåœºæ™¯ç‰¹å¾æå–ï¼ˆå¾…æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
  - è§†é¢‘æ—¶é•¿ã€åˆ†ç±»ã€æ ‡ç­¾
  - ä½œè€…ç‰¹å¾
  - è§‚çœ‹å®Œæˆç‡ã€ç‚¹èµç‡
- [ ] æ–°é—»åœºæ™¯ç‰¹å¾æå–ï¼ˆå¾…æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
  - æ–‡æœ¬TF-IDFã€Word2Vec
  - æ–°é—»åˆ†ç±»ã€å‘å¸ƒæ—¶é—´
  - ç‚¹å‡»ç‡ã€è¯„è®ºæ•°

**2. å‘é‡åŒ–ä¸æ£€ç´¢** âœ…
- [x] é›†æˆMilvuså‘é‡æ•°æ®åº“ï¼ˆå®¢æˆ·ç«¯å°è£…ï¼‰
- [x] ç‰©å“å‘é‡ç”Ÿæˆï¼ˆEmbeddingæ¥å£ï¼‰
- [x] ç”¨æˆ·å‘é‡ç”Ÿæˆï¼ˆå†å²è¡Œä¸ºèšåˆï¼‰
- [x] ANNç›¸ä¼¼åº¦æ£€ç´¢ï¼ˆå‘é‡å¬å›ç­–ç•¥ï¼‰
- [x] I2Iå‘é‡å¬å›ï¼ˆåŸºäºç‰©å“çš„å‘é‡å¬å›ï¼‰

**3. å®æ—¶ç‰¹å¾è®¡ç®—ï¼ˆKafka + Flinkï¼‰** âœ…
- [x] Kafkaé›†æˆä¸Topicè®¾è®¡
  - user-behaviors-{tenant_id} Topic
  - user-profile-updates Topic
  - item-stats-updates Topic
  - recommendation-metrics Topic
- [x] Flinkç¯å¢ƒæ­å»ºï¼ˆPyFlinkä½œä¸šæ¡†æ¶ï¼‰
- [x] Flink Job 1: ç”¨æˆ·ç”»åƒå®æ—¶æ›´æ–°
  - 5åˆ†é’Ÿæ»šåŠ¨çª—å£èšåˆ
  - è®¡ç®—ç”¨æˆ·åå¥½ã€æ´»è·ƒæ—¶æ®µ
  - å†™å…¥MongoDBå’ŒRedis
  - å‘é€åˆ°user-profile-updates Topic
- [x] Flink Job 2: ç‰©å“çƒ­åº¦å®æ—¶è®¡ç®—
  - 1å°æ—¶æ»‘åŠ¨çª—å£ï¼ˆæ­¥é•¿15åˆ†é’Ÿï¼‰
  - æ—¶é—´è¡°å‡çƒ­åº¦ç®—æ³•
  - å†™å…¥Redis ZSET
  - å‘é€åˆ°item-stats-updates Topic
- [x] Flink Job 3: å®æ—¶æŒ‡æ ‡ç»Ÿè®¡
  - CTRã€å¹³å‡è§‚çœ‹æ—¶é•¿ã€å®Œæ’­ç‡ã€äº’åŠ¨ç‡
  - 1åˆ†é’Ÿæ»šåŠ¨çª—å£
  - æ¨é€åˆ°Prometheus Pushgateway
  - å‘é€åˆ°recommendation-metrics Topic

#### Week 9-10: æ·±åº¦å­¦ä¹ æ¨¡å‹ âœ…

**1. æ¨¡å‹æ¡†æ¶** âœ…
- [x] PyTorché›†æˆï¼ˆBaseRecommenderModelåŸºç±»ï¼‰
- [x] æ¨¡å‹è®­ç»ƒpipelineï¼ˆModelTrainerï¼‰
- [x] æ¨¡å‹ç‰ˆæœ¬ç®¡ç†ï¼ˆModelRegistryï¼‰

**2. æ¨èæ¨¡å‹å®ç°** âœ…
- [x] Wide & Deepæ¨¡å‹ï¼ˆè®°å¿†+æ³›åŒ–ï¼‰
- [x] DeepFMæ¨¡å‹ï¼ˆFM+DNNç‰¹å¾äº¤äº’ï¼‰
- [x] åŒå¡”å¬å›æ¨¡å‹ï¼ˆUserå¡”+Itemå¡”ï¼‰
- [ ] åºåˆ—æ¨èæ¨¡å‹ï¼ˆGRU4Recï¼Œå¾…åç»­æ‰©å±•ï¼‰

**3. æ¨¡å‹æœåŠ¡åŒ–** âœ…
- [x] æ¨¡å‹åŠ è½½ä¸é¢„æµ‹ï¼ˆModelServerï¼‰
- [x] æ‰¹é‡é¢„æµ‹æ¥å£
- [x] æ¨¡å‹çƒ­æ›´æ–°ï¼ˆæ— ç¼åˆ‡æ¢ç‰ˆæœ¬ï¼‰
- [x] GPU/CPUè‡ªåŠ¨é€‰æ‹©
- [x] å¤šæ¨¡å‹å¹¶è¡Œç®¡ç†

#### Week 11-12: ç¦»çº¿ä»»åŠ¡ä¸è°ƒåº¦ âœ…

**1. ç¦»çº¿è®¡ç®—ä»»åŠ¡** âœ…
- [x] æ‰¹é‡ç‰©å“ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆItem-Based CFï¼‰
- [x] ç”¨æˆ·ç”»åƒç¦»çº¿æ›´æ–°ï¼ˆè¡Œä¸ºèšåˆã€åå¥½è®¡ç®—ï¼‰
- [x] æ¨¡å‹ç¦»çº¿è®­ç»ƒä»»åŠ¡ï¼ˆæ¯æ—¥è‡ªåŠ¨è®­ç»ƒï¼‰
- [x] æ¨èç»“æœé¢„è®¡ç®—ï¼ˆé«˜æ´»è·ƒç”¨æˆ·Top Nï¼‰
- [x] çƒ­é—¨ç‰©å“ç¼“å­˜æ›´æ–°
- [x] æ¨èæ•ˆæœæŒ‡æ ‡è®¡ç®—

**2. ä»»åŠ¡è°ƒåº¦** âœ…
- [x] Celeryä»»åŠ¡å®šä¹‰ï¼ˆ4ä¸ªä»»åŠ¡æ¨¡å—ï¼‰
- [x] å®šæ—¶ä»»åŠ¡é…ç½®ï¼ˆCelery Beatï¼‰
  - æ¯å°æ—¶: è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦
  - æ¯2å°æ—¶: æ›´æ–°ç”¨æˆ·ç”»åƒ
  - æ¯4å°æ—¶: é¢„è®¡ç®—æ¨èç»“æœ
  - æ¯å¤©å‡Œæ™¨3ç‚¹: æ¨¡å‹è®­ç»ƒ
  - æ¯å¤©å‡Œæ™¨4ç‚¹: æ¸…ç†è¿‡æœŸç¼“å­˜
- [x] ä»»åŠ¡ç›‘æ§ä¸é‡è¯•ï¼ˆCeleryé…ç½®ï¼‰
- [x] ä»»åŠ¡æ‰§è¡Œæ—¥å¿—ï¼ˆå†…ç½®æ—¥å¿—ç³»ç»Ÿï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šå¹³å°åŒ–ä¸è¿è¥æ”¯æŒ (4-6å‘¨) âœ…

#### Week 13-14: ABæµ‹è¯•å¹³å° âœ…

**1. å®éªŒç®¡ç†** âœ…
- [x] å®éªŒé…ç½®æ•°æ®æ¨¡å‹ï¼ˆExperiment, ExperimentVariantï¼‰
- [x] å®éªŒåˆ›å»ºä¸ç®¡ç†APIï¼ˆCRUD + å¯åŠ¨/åœæ­¢ï¼‰
- [x] æµé‡åˆ†é…ç®—æ³•
  - User ID Hashï¼ˆä¸€è‡´æ€§å“ˆå¸Œï¼‰
  - Randomï¼ˆéšæœºåˆ†é…ï¼‰
  - Weightedï¼ˆåŠ æƒåˆ†é…ï¼‰
- [x] å®éªŒç”Ÿæ•ˆé€»è¾‘ï¼ˆåˆ†é…è®°å½•ã€å˜ä½“é…ç½®ï¼‰

**2. æ•ˆæœè¯„ä¼°** âœ…
- [x] æŒ‡æ ‡å®šä¹‰ï¼ˆä¸»è¦æŒ‡æ ‡ã€æ¬¡è¦æŒ‡æ ‡ã€æŠ¤æ æŒ‡æ ‡ï¼‰
- [x] å®éªŒç»“æœè®¡ç®—ï¼ˆExperimentResultï¼‰
- [x] ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ
  - Tæ£€éªŒï¼ˆè¿ç»­æŒ‡æ ‡ï¼‰
  - æ¯”ä¾‹Zæ£€éªŒï¼ˆCTRã€è½¬åŒ–ç‡ï¼‰
  - åºè´¯æ£€éªŒï¼ˆSequential Testingï¼‰
- [x] æ•ˆæœåˆ†æå·¥å…·
  - ç½®ä¿¡åŒºé—´è®¡ç®—
  - æ ·æœ¬é‡è®¡ç®—å™¨
  - å¤šè‡‚è€è™æœºï¼ˆThompson Samplingï¼‰

#### Week 15-16: ç›‘æ§ä¸å‘Šè­¦ âœ…

**1. ç›‘æ§ä½“ç³»** âœ…
- [x] Prometheusé›†æˆï¼ˆprometheus_clientï¼‰
- [x] è‡ªå®šä¹‰ä¸šåŠ¡æŒ‡æ ‡åŸ‹ç‚¹ï¼ˆapp/core/metrics.pyï¼‰
  - æ¨èè¯·æ±‚é‡ï¼ˆCounterï¼‰
  - æ¨èå“åº”æ—¶é—´ï¼ˆHistogramï¼‰
  - æ¨èè¦†ç›–ç‡ï¼ˆGaugeï¼‰
  - æ¨èå¤šæ ·æ€§ï¼ˆGaugeï¼‰
  - CTRã€ç¼“å­˜å‘½ä¸­ç‡
- [x] Grafana Dashboardé…ç½®ï¼ˆconfig/prometheus.ymlï¼‰

**2. æ—¥å¿—ä¸è¿½è¸ª** ğŸš§
- [x] ç»“æ„åŒ–æ—¥å¿—é…ç½®ï¼ˆPython loggingï¼‰
- [ ] ELK Stacké›†æˆï¼ˆå¯é€‰ï¼Œç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] Jaegeré“¾è·¯è¿½è¸ªé›†æˆï¼ˆå¯é€‰ï¼‰
- [x] æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æï¼ˆå†…ç½®ï¼‰

**3. å‘Šè­¦ç³»ç»Ÿ** ğŸš§
- [x] å‘Šè­¦è§„åˆ™é…ç½®ï¼ˆPrometheus Alertmanagerï¼‰
- [ ] å‘Šè­¦é€šçŸ¥ï¼ˆé‚®ä»¶ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ï¼‰
- [ ] å‘Šè­¦æ”¶æ•›ä¸å‡çº§ï¼ˆå¾…æ‰©å±•ï¼‰

#### Week 17-18: ç®¡ç†åå°ä¸æ•°æ®åˆ†æ âœ…

**1. ç®¡ç†åå°API** âœ…
- [x] ä»ªè¡¨æ¿æ¦‚è§ˆAPIï¼ˆæ ¸å¿ƒæŒ‡æ ‡ï¼‰
- [x] æŒ‡æ ‡è¶‹åŠ¿APIï¼ˆæŒ‰å¤©èšåˆï¼‰
- [x] ç‰©å“åˆ†å¸ƒç»Ÿè®¡API
- [x] ç”¨æˆ·è¡Œä¸ºåˆ†æAPI
- [x] æ•°æ®å¯¼å‡ºAPIï¼ˆinteractions/items/user_profilesï¼‰
- [x] ç³»ç»Ÿå¥åº·æ£€æŸ¥API
- [x] å®éªŒæ±‡æ€»API

**2. æ•°æ®å¯è§†åŒ–æ”¯æŒ** âœ…
- [x] æ¨èæ•ˆæœç›‘æ§æ•°æ®æ¥å£
- [x] ç”¨æˆ·è¡Œä¸ºåˆ†ææ•°æ®æ¥å£
- [x] ç‰©å“åˆ†å¸ƒç»Ÿè®¡æ•°æ®æ¥å£
- [x] å®æ—¶æŒ‡æ ‡æŸ¥è¯¢æ¥å£
- [x] å‰ç«¯Dashboardï¼ˆVue3 + Arco Designï¼‰
  - ä»ªè¡¨æ¿ï¼ˆæ ¸å¿ƒæŒ‡æ ‡+è¶‹åŠ¿å›¾ï¼‰
  - åœºæ™¯ç®¡ç†ï¼ˆCRUDï¼‰
  - ç‰©å“ç®¡ç†ï¼ˆCRUD + æ‰¹é‡å¯¼å…¥ï¼‰
  - ABå®éªŒç®¡ç†ï¼ˆåˆ›å»ºã€å¯åŠ¨/åœæ­¢ã€ç»“æœæŸ¥çœ‹ï¼‰
  - æ•°æ®åˆ†æï¼ˆé¥¼å›¾ã€æŸ±çŠ¶å›¾ï¼‰

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–ä¸ä¸Šçº¿ (2-4å‘¨) âœ…

#### Week 19-20: æ€§èƒ½ä¼˜åŒ–ä¸é«˜å¯ç”¨ âœ…

**1. æ€§èƒ½ä¼˜åŒ–** âœ…
- [x] ç¼“å­˜ç®¡ç†å™¨ï¼ˆCacheManagerï¼‰
  - ç¼“å­˜è£…é¥°å™¨
  - ç¼“å­˜ç»Ÿè®¡
  - ç¼“å­˜é¢„çƒ­
- [x] æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆQueryOptimizerï¼‰
  - ç´¢å¼•ä¼˜åŒ–å»ºè®®
  - èšåˆç®¡é“ä¼˜åŒ–
- [x] æ€§èƒ½ç›‘æ§å·¥å…·
  - æ‰§è¡Œæ—¶é—´è·Ÿè¸ª
  - æ…¢æŸ¥è¯¢è®°å½•
- [x] æ‰¹å¤„ç†å™¨ï¼ˆBatchProcessorï¼‰
- [x] æ‡’åŠ è½½ï¼ˆLazyLoaderï¼‰
- [x] å¹¶è¡Œæ‰§è¡Œå·¥å…·ï¼ˆasync_parallelï¼‰

**2. é«˜å¯ç”¨ä¿éšœ** âœ…
- [x] é™æµå™¨ï¼ˆRateLimiterï¼‰
  - æ»‘åŠ¨çª—å£ç®—æ³•
  - é…é¢ç®¡ç†
- [x] ç†”æ–­å™¨ï¼ˆCircuitBreakerï¼‰
  - æ•…éšœæ£€æµ‹
  - è‡ªåŠ¨æ¢å¤
  - é™çº§ç­–ç•¥
- [x] ç†”æ–­å™¨è£…é¥°å™¨ï¼ˆwith_circuit_breakerï¼‰
- [x] Cache-Asideæ¨¡å¼
- [x] è¿æ¥æ± ç®¡ç†

**3. å‹åŠ›æµ‹è¯•** ğŸ“ï¼ˆå¾…ç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] å•æ¥å£å‹æµ‹è„šæœ¬
- [ ] å…¨é“¾è·¯å‹æµ‹
- [ ] æ€§èƒ½åŸºå‡†å»ºç«‹
- [ ] å®¹é‡è§„åˆ’æ–‡æ¡£

#### Week 21-22: æ–‡æ¡£ä¸éƒ¨ç½² ğŸ“ï¼ˆå¾…ç”Ÿäº§éƒ¨ç½²æ—¶å®Œå–„ï¼‰

**1. æ–‡æ¡£å®Œå–„**
- [x] APIæ–‡æ¡£ï¼ˆFastAPIè‡ªåŠ¨ç”Ÿæˆï¼‰
- [x] æ¶æ„è®¾è®¡æ–‡æ¡£ï¼ˆdocs/ç³»ç»Ÿè®¾è®¡.mdï¼‰
- [x] å¼€å‘æŒ‡å—æ–‡æ¡£ï¼ˆdocs/å¼€å‘æŒ‡å—.mdï¼‰
- [x] åŸ‹ç‚¹æ¥å…¥æŒ‡å—ï¼ˆdocs/åŸ‹ç‚¹æ¥å…¥å®Œæ•´æŒ‡å—.mdï¼‰
- [x] æ•°æ®æ¥å…¥æŒ‡å—ï¼ˆdocs/æ•°æ®æ¥å…¥æŒ‡å—.mdï¼‰
- [x] READMEæ–‡æ¡£
- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œï¼ˆå¾…è¡¥å……ï¼‰

**2. éƒ¨ç½²å‡†å¤‡**
- [x] Dockeré…ç½®ï¼ˆdocker-compose.ymlï¼‰
- [x] Kubernetesé…ç½®ï¼ˆk8s/ï¼‰
- [x] ç¯å¢ƒé…ç½®ç®¡ç†ï¼ˆconfig/ï¼‰
- [ ] CI/CD Pipelineï¼ˆå¾…ç”Ÿäº§ç¯å¢ƒï¼‰

**3. ä¸Šçº¿æ£€æŸ¥æ¸…å•**ï¼ˆå¾…ç”Ÿäº§éƒ¨ç½²ï¼‰
- [ ] å®‰å…¨å®¡è®¡
- [ ] æ€§èƒ½éªŒæ”¶
- [ ] æ•°æ®å¤‡ä»½æ–¹æ¡ˆ
- [ ] å›æ»šæ–¹æ¡ˆ
- [ ] åº”æ€¥é¢„æ¡ˆ

---

## æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹

### 1. Protobufæ•°æ®è½¬æ¢

#### Timestampè½¬æ¢

```python
# Python: datetime â†’ protobuf Timestamp
from google.protobuf import timestamp_pb2
ts = timestamp_pb2.Timestamp()
ts.FromDatetime(datetime_obj)

# å‰ç«¯: protobuf â†’ æ˜¾ç¤ºæ ¼å¼
const formatTimestamp = (timestamp: any): string => {
  if (timestamp.seconds !== undefined) {
    const date = new Date(timestamp.seconds * 1000);
    return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;
  }
  return '-';
};
```

#### Enumæ˜ å°„

```python
# Python enum â†’ protobuf enum
status_map = {
    "draft": 1,
    "deployed": 2,
    "archived": 3,
}

# å‰ç«¯: string value
const statusOptions = [
  { label: 'è‰ç¨¿', value: 'draft' },
  { label: 'å·²éƒ¨ç½²', value: 'deployed' },
];
```

#### Structè½¬æ¢

```python
# Python dict â†’ protobuf Struct
from google.protobuf import struct_pb2
config_struct = struct_pb2.Struct()
config_struct.update(config_dict)

# protobuf Struct â†’ Python dict
from google.protobuf.json_format import MessageToDict
config_dict = MessageToDict(struct_proto)
```

### 2. Go POSTè¯·æ±‚å‚æ•°è¯»å–

```go
// âœ… æ­£ç¡®ï¼šä»POST bodyè¯»å–
body, _ := io.ReadAll(c.Request.Body)
var parameter map[string]interface{}
_ = json.Unmarshal(body, &parameter)

tenantID := ""
if tid, ok := parameter["tenant_id"].(string); ok {
    tenantID = tid
}

// âŒ é”™è¯¯ï¼šç”¨c.Queryè¯»å–POSTå‚æ•°
tenantID := c.Query("tenant_id")  // è¯»ä¸åˆ°POST bodyçš„æ•°æ®
```

### 3. å‰ç«¯APIè°ƒç”¨

```typescript
// defHttpå·²å¤„ç†response.dataï¼Œç›´æ¥è¿”å›æ•°æ®
const data = await list(params);  // âœ… æ­£ç¡®
const { data } = await list(params);  // âŒ é”™è¯¯ï¼ˆåŒé‡è§£æ„ï¼‰

// è®¾ç½®row-key
<a-table row-key="model_id" ... />  // âœ… ä½¿ç”¨å®é™…å­—æ®µ
<a-table row-key="id" ... />  // âŒ å­—æ®µå¯èƒ½ä¸å­˜åœ¨

// åˆ†é¡µé…ç½®
const basePagination = reactive({ current: 1, pageSize: 20, total: 0 });
```

### 4. MongoDB ObjectIDç”Ÿæˆ

```go
// Go
import "go.mongodb.org/mongo-driver/bson/primitive"
modelID := primitive.NewObjectID().Hex()

// Python
from bson import ObjectId
model_id = str(ObjectId())
```

---

## å¼€å‘è§„èŒƒ

### 1. IDç”Ÿæˆè§„åˆ™

- **æ‰€æœ‰èµ„æºIDç”±åç«¯è‡ªåŠ¨ç”Ÿæˆ**
- ä½¿ç”¨MongoDB ObjectID (24ä½hexå­—ç¬¦ä¸²)
- å‰ç«¯è¡¨å•ä¸éœ€è¦è¾“å…¥IDå­—æ®µ

### 2. ç§Ÿæˆ·å‚æ•°å¤„ç†

```python
# PythonæœåŠ¡æ”¯æŒç©ºç§Ÿæˆ·
filter_query = {}
if tenant_id:  # æœ‰å€¼æ‰åŠ å…¥æŸ¥è¯¢æ¡ä»¶
    filter_query["tenant_id"] = tenant_id
```

### 3. é”™è¯¯å¤„ç†

```typescript
// å‰ç«¯ç©ºæ•°æ®å¤„ç†
try {
  const data = await list(params);
  items.value = data?.items || [];
} catch (error) {
  console.error('æŸ¥è¯¢å¤±è´¥:', error);  // âœ… åªè®°å½•æ—¥å¿—
  // âŒ ä¸è¦: Message.error('æŸ¥è¯¢å¤±è´¥');
}
```

### 4. æ—¶é—´æ ¼å¼ç»Ÿä¸€

- æ•°æ®åº“: UTC datetime
- Protobuf: Timestamp (seconds + nanos)
- å‰ç«¯æ˜¾ç¤º: YYYY/MM/DD HH:mm:ss

### 5. çŠ¶æ€æ˜ å°„

```python
# Python Pydantic Enum
class ModelStatus(str, Enum):
    DRAFT = "draft"
    DEPLOYED = "deployed"
    ARCHIVED = "archived"

# Protobuf Enum (ä»1å¼€å§‹)
enum ModelStatus {
  MODEL_STATUS_UNSPECIFIED = 0;
  MODEL_STATUS_DRAFT = 1;
  MODEL_STATUS_DEPLOYED = 2;
  MODEL_STATUS_ARCHIVED = 3;
}

# å‰ç«¯æ˜¾ç¤º
const STATUS_MAP = {
  draft: 'è‰ç¨¿',
  deployed: 'å·²éƒ¨ç½²',
  archived: 'å·²å½’æ¡£',
};
```

---

## å·²å®ŒæˆåŠŸèƒ½æ¨¡å—

### 1. æ¨¡å‹ç®¡ç† âœ…

- âœ… åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç§Ÿæˆ·/ç±»å‹/çŠ¶æ€ç­›é€‰ï¼‰
- âœ… åˆ›å»ºæ¨¡å‹ï¼ˆè‡ªåŠ¨ç”Ÿæˆmodel_idï¼‰
- âœ… ç¼–è¾‘æ¨¡å‹
- âœ… åˆ é™¤æ¨¡å‹
- âœ… ç‰¹å¾é…ç½®ï¼ˆåˆ†ç±»ç»“æ„ï¼šuser/item/context/interactionï¼‰
- âœ… ç®—æ³•å‚æ•°é…ç½®ï¼ˆæ ¹æ®æ¨¡å‹ç±»å‹åŠ¨æ€æ˜¾ç¤ºï¼‰
- âœ… è®­ç»ƒæ•°æ®è·¯å¾„é…ç½®

**ç‰¹ç‚¹**:
- æ¨¡å‹ç±»å‹: recall/rank/rerank
- ç‰¹å¾åˆ†ç±»ç®¡ç†ï¼ˆä»å­—å…¸è¡¨åŠ¨æ€åŠ è½½ï¼‰
- ç®—æ³•å‚æ•°å¸¦é»˜è®¤å€¼å’Œæ³¨é‡Š
- çŠ¶æ€é¢œè‰²æ ‡ç­¾æ˜¾ç¤º

### 2. æ¨¡æ¿ç®¡ç† âœ…

- âœ… åˆ—è¡¨æŸ¥è¯¢
- âœ… åˆ›å»ºæ¨¡æ¿
- âœ… å¯è§†åŒ–é…ç½®ç¼–è¾‘å™¨
- âœ… æ¨¡å‹é€‰æ‹©ï¼ˆæŒ‰ç±»å‹ç­›é€‰ï¼‰
- âœ… åœºæ™¯ç±»å‹ï¼ˆä»å­—å…¸è¡¨åŠ¨æ€åŠ è½½ï¼‰

**ç‰¹ç‚¹**:
- ä¸å…³è”ç§Ÿæˆ·ï¼ˆè·¨ç§Ÿæˆ·å¯å¤ç”¨ï¼‰
- åœºæ™¯ç±»å‹é…ç½®åŒ–
- å¯è§†åŒ–é…ç½®ï¼ˆRecall/Rank/Rerankï¼‰

### 3. åœºæ™¯ç®¡ç† âœ…

- âœ… åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç§Ÿæˆ·/ç±»å‹/çŠ¶æ€ç­›é€‰ï¼‰
- âœ… åˆ›å»ºåœºæ™¯ï¼ˆè‡ªåŠ¨ç”Ÿæˆscenario_idï¼‰
- âœ… ç¼–è¾‘åœºæ™¯
- âœ… å¯è§†åŒ–é…ç½®ç¼–è¾‘å™¨
- âœ… çŠ¶æ€åˆ‡æ¢

**ç‰¹ç‚¹**:
- ä¸ç§Ÿæˆ·ç»‘å®š
- åŸºäºæ¨¡æ¿åˆ›å»º
- æ”¯æŒç‹¬ç«‹é…ç½®

### 4. ç‰©å“ç®¡ç† âœ…

- âœ… åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç§Ÿæˆ·/åœºæ™¯/çŠ¶æ€ç­›é€‰ï¼‰
- âœ… åˆ›å»ºç‰©å“ï¼ˆè‡ªåŠ¨ç”Ÿæˆitem_idï¼‰
- âœ… ç¼–è¾‘ç‰©å“
- âœ… åˆ é™¤ç‰©å“ï¼ˆè½¯åˆ é™¤ï¼‰
- âœ… æ‰¹é‡å¯¼å…¥

**ç‰¹ç‚¹**:
- æŒ‰åœºæ™¯ç»„ç»‡
- æ”¯æŒå…ƒæ•°æ®(metadata)
- æ”¯æŒå‘é‡(embedding)

### 5. ABå®éªŒç®¡ç† âœ…

- âœ… åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç§Ÿæˆ·/çŠ¶æ€ç­›é€‰ï¼‰
- âœ… åˆ›å»ºå®éªŒï¼ˆè‡ªåŠ¨ç”Ÿæˆexperiment_idï¼‰
- âœ… å¯åŠ¨/åœæ­¢å®éªŒ
- âœ… åˆ é™¤å®éªŒï¼ˆè½¯åˆ é™¤â†’archivedï¼‰
- âœ… æµé‡åˆ†é…é…ç½®

**ç‰¹ç‚¹**:
- å¯¹ç…§ç»„/å®éªŒç»„é…ç½®
- æµé‡åˆ†é…éªŒè¯ï¼ˆæ€»å’Œ100%ï¼‰
- çŠ¶æ€æµè½¬ç®¡ç†

### 6. æ•°æ®åŸ‹ç‚¹æœåŠ¡ âœ…

- âœ… åœºæ™¯åŸ‹ç‚¹é…ç½®ç®¡ç†
- âœ… HTTP/gRPC/Kafkaä¸‰ç§æ¥å…¥æ–¹å¼
- âœ… åœºæ™¯æ•°æ®éªŒè¯
- âœ… å®æ—¶æ•°æ®é‡‡é›†

---

## å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. å‰ç«¯åˆ—è¡¨ä¸æ˜¾ç¤ºæ•°æ®

**åŸå› **: åŒé‡è§£æ„æˆ–row-keyé”™è¯¯  
**è§£å†³**:
```typescript
// âœ… æ­£ç¡®
const data = await list(params);
items.value = data?.items || [];

// âœ… æ­£ç¡®row-key
<a-table row-key="model_id" ... />
```

### 2. Goæ¥å£è¯»ä¸åˆ°POSTå‚æ•°

**åŸå› **: ä½¿ç”¨c.Queryè¯»å–POST bodyå‚æ•°  
**è§£å†³**:
```go
// âœ… æ­£ç¡®ï¼šä»bodyè¯»å–
body, _ := io.ReadAll(c.Request.Body)
var parameter map[string]interface{}
_ = json.Unmarshal(body, &parameter)
```

### 3. Python PydanticéªŒè¯å¤±è´¥

**åŸå› **: å­—å…¸ç»“æ„ä¸æ¨¡å‹ä¸åŒ¹é…  
**è§£å†³**:
```python
# âœ… ä½¿ç”¨model_validate
item = Item.model_validate(doc)

# âœ… ä½¿ç”¨model_dumpè½¬æ¢
result.model_dump()
```

### 4. æ—¶é—´æ˜¾ç¤ºä¸ºprotobufæ ¼å¼

**åŸå› **: æœªæ ¼å¼åŒ–timestamp  
**è§£å†³**:
```typescript
// æ·»åŠ formatTimestampå‡½æ•°
const formatTimestamp = (timestamp: any): string => {
  if (timestamp.seconds !== undefined) {
    const date = new Date(timestamp.seconds * 1000);
    // æ ¼å¼åŒ–...
  }
  return '-';
};
```

### 5. Enumå€¼ä¸åŒ¹é…

**åŸå› **: å‰ç«¯å‘é€å­—ç¬¦ä¸²ï¼Œåç«¯æœŸæœ›æ•°å­—  
**è§£å†³**:
```typescript
// âœ… å‰ç«¯å‘é€å­—ç¬¦ä¸²
params.model_type = 'recall'  // ä¸æ˜¯ 1

// Goåç«¯è½¬æ¢
model_type_map := map[string]int{
    "recall": 1,
    "rank": 2,
}
```

---

## éƒ¨ç½²å’Œæµ‹è¯•

### PythonæœåŠ¡é‡å¯

```bash
docker restart lemo_recommender
```

### å‰ç«¯æ„å»º

```bash
cd /Users/edy/Lemo/service_manage/service_manager_web/admin
yarn build
```

### æµ‹è¯•æ¸…å•

- [ ] æ¨¡å‹ç®¡ç†ï¼šåˆ—è¡¨/åˆ›å»º/ç¼–è¾‘/åˆ é™¤
- [ ] æ¨¡æ¿ç®¡ç†ï¼šåˆ—è¡¨/åˆ›å»º/ç¼–è¾‘
- [ ] åœºæ™¯ç®¡ç†ï¼šåˆ—è¡¨/åˆ›å»º/ç¼–è¾‘/çŠ¶æ€åˆ‡æ¢
- [ ] ç‰©å“ç®¡ç†ï¼šåˆ—è¡¨/åˆ›å»º/æ‰¹é‡å¯¼å…¥
- [ ] ABå®éªŒï¼šåˆ—è¡¨/åˆ›å»º/å¯åŠ¨/åœæ­¢

---

## å…³é”®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´èŠ‚ç‚¹ | äº¤ä»˜ç‰© | çŠ¶æ€ |
|--------|----------|--------|------|
| M1: MVPç‰ˆæœ¬ | Week 6 | åŸºç¡€æ¨èç³»ç»Ÿï¼Œæ”¯æŒ2ä¸ªåœºæ™¯ï¼Œä¸ç½‘å…³/ç”¨æˆ·æœåŠ¡å¯¹æ¥ | âœ… å·²å®Œæˆ |
| M2: ç‰¹æ€§å¢å¼ºç‰ˆ | Week 12 | å‘é‡æ£€ç´¢ã€æ·±åº¦å­¦ä¹ æ¨¡å‹ã€å®æ—¶æµå¤„ç† | âœ… å·²å®Œæˆ |
| M3: å¹³å°åŒ–ç‰ˆæœ¬ | Week 18 | ABæµ‹è¯•ã€ç›‘æ§å‘Šè­¦ã€ç®¡ç†åå° | âœ… å·²å®Œæˆ |
| M4: ç”Ÿäº§å°±ç»ªç‰ˆ | Week 22 | æ€§èƒ½ä¼˜åŒ–ã€é«˜å¯ç”¨ã€å®Œæ•´æ–‡æ¡£ | ğŸš§ è¿›è¡Œä¸­ |

---

## æ•°æ®å­—å…¸

### ç‰¹å¾å­—å…¸è¡¨

- **è¡¨ç»“æ„**: `common_dictionary_table` (å®šä¹‰è¡¨) + `common_dictionary_data` (æ•°æ®è¡¨) æˆ– åŠ¨æ€è¡¨
- **ç‰¹å¾åˆ†ç±»**: 
  - `rec_feature_user` (ç”¨æˆ·ç‰¹å¾)
  - `rec_feature_item` (ç‰©å“ç‰¹å¾)
  - `rec_feature_context` (ä¸Šä¸‹æ–‡ç‰¹å¾)
  - `rec_feature_interaction` (äº¤äº’ç‰¹å¾)

### åœºæ™¯ç±»å‹å­—å…¸

- **è¡¨**: `rec_scenario_type`
- **ç¤ºä¾‹**: vlog, news, ecommerce

---

## æƒé™å’Œä¸­é—´ä»¶

### ç§Ÿæˆ·IDè·å–

```go
// Goä¸­é—´ä»¶è‡ªåŠ¨æ³¨å…¥
userInfo, _ := middleware.GetUserInfo(c)
tenantID := userInfo.BusinessID
```

### APIéªŒè¯

- `ValidityAPi` ä¸­é—´ä»¶éªŒè¯è¯·æ±‚å¤´
- `verify-encrypt`, `verify-time` headers

---

## å‚è€ƒèµ„æ–™

### Protoæ–‡ä»¶ä½ç½®

- `andrew-protos/proto/recommender/v1/`

### ç”Ÿæˆå‘½ä»¤

```bash
cd andrew-protos
make generate
```

### ä¾èµ–æ›´æ–°

```bash
cd service_manager_server
go mod vendor  # æ›´æ–°vendor
```

---

## é£é™©ä¸æŒ‘æˆ˜

### æŠ€æœ¯é£é™©

1. **å¤šåœºæ™¯æŠ½è±¡å¤æ‚åº¦**: ä¸åŒåœºæ™¯å·®å¼‚å¤§ï¼Œéœ€è®¾è®¡è‰¯å¥½çš„æŠ½è±¡å±‚
2. **å®æ—¶æ€§èƒ½è¦æ±‚**: æ¨èå»¶è¿Ÿéœ€æ§åˆ¶åœ¨100mså†…
3. **å†·å¯åŠ¨é—®é¢˜**: æ–°ç”¨æˆ·ã€æ–°ç‰©å“æ¨èæ•ˆæœå·®

### è§£å†³æ–¹æ¡ˆ

1. é‡‡ç”¨ç­–ç•¥æ¨¡å¼+é…ç½®åŒ–ï¼Œé™ä½åœºæ™¯è€¦åˆ
2. å¤šçº§ç¼“å­˜+é¢„è®¡ç®—+ANNæ£€ç´¢
3. çƒ­é—¨æ¨èå…œåº•+ä¸»åŠ¨æ¢ç´¢ç­–ç•¥

---

## åç»­è¿­ä»£æ–¹å‘

1. **æ›´å¤šç®—æ³•æ”¯æŒ**: çŸ¥è¯†å›¾è°±ã€å¼ºåŒ–å­¦ä¹ 
2. **è·¨åœºæ™¯è¿ç§»å­¦ä¹ **: åˆ©ç”¨å¤šåœºæ™¯æ•°æ®æå‡æ•ˆæœ
3. **AutoML**: è‡ªåŠ¨è°ƒå‚ä¸æ¨¡å‹é€‰æ‹©
4. **å®æ—¶ä¸ªæ€§åŒ–**: ç”¨æˆ·è¡Œä¸ºå®æ—¶ç”Ÿæ•ˆ
5. **å¤šç›®æ ‡ä¼˜åŒ–**: å¹³è¡¡ç‚¹å‡»ç‡ã€æ—¶é•¿ã€æ”¶ç›Šç­‰å¤šç›®æ ‡
6. **è”é‚¦å­¦ä¹ **: æ”¯æŒç”¨æˆ·éšç§ä¿æŠ¤çš„æ¨è

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-30  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

