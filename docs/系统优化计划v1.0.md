# æ¨èç³»ç»Ÿä¼˜åŒ–è®¡åˆ’ v1.0

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **åˆ›å»ºæ—¥æœŸ**: 2024-11-05
- **ä¼˜åŒ–å‘¨æœŸ**: 4-6å‘¨
- **è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ
- **ä¼˜å…ˆçº§**: P0ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰â†’ P1ï¼ˆç®—æ³•ä¼˜åŒ–ï¼‰â†’ P2ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

### æ ¸å¿ƒæŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰çŠ¶æ€ | ç›®æ ‡ | æå‡å¹…åº¦ |
|------|---------|------|---------|
| **æ¨èP99å»¶è¿Ÿ** | ~100msï¼ˆæ¨æµ‹ï¼‰ | < 80ms | 20% |
| **ç¼“å­˜å‘½ä¸­ç‡** | ~30%ï¼ˆæ¨æµ‹ï¼‰ | > 70% | 133% |
| **CTR** | åŸºå‡†å€¼ | +15% | 15% |
| **å¹³å‡è§‚çœ‹æ—¶é•¿** | åŸºå‡†å€¼ | +20% | 20% |
| **ç³»ç»ŸQPS** | ~1K | æ”¯æŒ5K+ | 400% |

---

## ğŸ“… å®æ–½è®¡åˆ’æ€»è§ˆ

### Phase 1: æ€§èƒ½ä¼˜åŒ–ï¼ˆWeek 1-2ï¼‰âš¡ ç«‹å³å¼€å§‹

**ç›®æ ‡**: é™ä½å»¶è¿Ÿã€æå‡ååé‡

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ | è´Ÿè´£æ¨¡å— |
|------|--------|--------|---------|
| 1.1 æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ– | 1å¤© | P0 | `app/services/recommendation/` |
| 1.2 å¤šçº§ç¼“å­˜æ¶æ„å®Œå–„ | 3å¤© | P0 | `app/services/cache_manager.py` |
| 1.3 æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– | 1å¤© | P0 | `scripts/optimize_indexes.py` |
| 1.4 å¼‚æ­¥å¹¶è¡Œå¬å›ä¼˜åŒ– | 2å¤© | P0 | `app/engine/recall/` |

**é¢„æœŸæ”¶ç›Š**:
- å¹³å‡å»¶è¿Ÿé™ä½ **60%**
- ç¼“å­˜å‘½ä¸­ç‡æå‡åˆ° **70%**
- QPS æå‡åˆ° **5K+**

### Phase 2: ç®—æ³•ä¼˜åŒ–ï¼ˆWeek 3-4ï¼‰ğŸ§ 

**ç›®æ ‡**: æå‡æ¨èæ•ˆæœ

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ | è´Ÿè´£æ¨¡å— |
|------|--------|--------|---------|
| 2.1 DeepFMæ¨¡å‹è®­ç»ƒä¸éƒ¨ç½² | 5å¤© | P1 | `app/ml/` |
| 2.2 ALSååŒè¿‡æ»¤ä¼˜åŒ– | 3å¤© | P1 | `app/engine/recall/cf.py` |
| 2.3 å®æ—¶ç‰¹å¾æœåŠ¡ | 5å¤© | P1 | `app/services/feature/` |
| 2.4 å‘é‡å¬å›ä¼˜åŒ– | 3å¤© | P1 | `app/engine/recall/vector.py` |

**é¢„æœŸæ”¶ç›Š**:
- CTR æå‡ **15-20%**
- è§‚çœ‹æ—¶é•¿æå‡ **20-25%**
- ç”¨æˆ·ç•™å­˜æå‡ **5-10%**

### Phase 3: åŠŸèƒ½å®Œå–„ï¼ˆWeek 5-6ï¼‰ğŸ“¦

**ç›®æ ‡**: å¢å¼ºç³»ç»Ÿèƒ½åŠ›

| ä»»åŠ¡ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ | è´Ÿè´£æ¨¡å— |
|------|--------|--------|---------|
| 3.1 MABå®éªŒç³»ç»Ÿ | 7å¤© | P2 | `app/services/experiment/` |
| 3.2 Flinkä½œä¸šè‡ªåŠ¨ä¼¸ç¼© | 5å¤© | P2 | `app/services/flink/` |
| 3.3 ç›‘æ§å‘Šè­¦å®Œå–„ | 3å¤© | P2 | `config/prometheus.yml` |

---

## ğŸ“– è¯¦ç»†å®æ–½æ–¹æ¡ˆ

### Phase 1: æ€§èƒ½ä¼˜åŒ–

#### 1.1 æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼ˆP0ï¼‰

**é—®é¢˜è¯Šæ–­**:
```python
# âŒ å½“å‰å¯èƒ½å­˜åœ¨çš„N+1æŸ¥è¯¢é—®é¢˜
async def get_recommendations(user_id: str):
    candidates = await recall(user_id)  # è¿”å›100ä¸ªitem_id
    
    items = []
    for item_id in candidates:
        item = await db.items.find_one({"item_id": item_id})  # 100æ¬¡æŸ¥è¯¢
        items.append(item)
```

**ä¼˜åŒ–æ–¹æ¡ˆ**:
1. ä½¿ç”¨ `$in` æ“ä½œç¬¦æ‰¹é‡æŸ¥è¯¢
2. æ„å»º idâ†’item æ˜ å°„ï¼Œä¿æŒå¬å›é¡ºåº
3. ä½¿ç”¨ Redis MGET æ‰¹é‡è·å–ç¼“å­˜

**æ¶‰åŠæ–‡ä»¶**:
- `app/services/recommendation/service.py`
- `app/services/item/service.py`

**éªŒè¯æŒ‡æ ‡**:
- æŸ¥è¯¢æ¬¡æ•°ï¼š100æ¬¡ â†’ 1æ¬¡
- å»¶è¿Ÿï¼š500ms â†’ 20ms

---

#### 1.2 å¤šçº§ç¼“å­˜æ¶æ„å®Œå–„ï¼ˆP0ï¼‰

**å½“å‰çŠ¶æ€**: ç¼“å­˜æ¡†æ¶å·²æœ‰ï¼Œä½†è¦†ç›–ä¸å…¨

**ä¼˜åŒ–æ–¹æ¡ˆ**: å®ç°ä¸‰çº§ç¼“å­˜

```
L1 (æ¨èç»“æœç¼“å­˜) - TTL: 5åˆ†é’Ÿ
  â”œâ”€ Key: rec:{scenario}:{user_id}:{context_hash}
  â””â”€ å‘½ä¸­ç‡ç›®æ ‡: 40%

L2 (çƒ­æ•°æ®ç¼“å­˜) - TTL: 1å°æ—¶  
  â”œâ”€ Key: hot:items:{scenario}
  â”œâ”€ Key: user:profile:{user_id}
  â””â”€ å‘½ä¸­ç‡ç›®æ ‡: 50%

L3 (ç‰©å“è¯¦æƒ…ç¼“å­˜) - TTL: 24å°æ—¶
  â”œâ”€ Key: item:{item_id}
  â””â”€ å‘½ä¸­ç‡ç›®æ ‡: 90%
```

**æ–°å¢æ–‡ä»¶**:
- `app/services/cache/multi_level_cache.py` â­
- `app/services/cache/cache_warmer.py` â­

**æ¶‰åŠä¿®æ”¹**:
- `app/services/cache_manager.py` - é›†æˆå¤šçº§ç¼“å­˜
- `app/services/recommendation/service.py` - ä½¿ç”¨ç¼“å­˜

**éªŒè¯æŒ‡æ ‡**:
- æ€»ä½“å‘½ä¸­ç‡ï¼š30% â†’ 70%
- å¹³å‡å»¶è¿Ÿï¼š100ms â†’ 25ms

---

#### 1.3 æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ï¼ˆP0ï¼‰

**ä¼˜åŒ–æ–¹æ¡ˆ**: åˆ›å»ºå¤åˆç´¢å¼•

**æ–°å¢æ–‡ä»¶**:
- `scripts/optimize_indexes.py` â­

**ç´¢å¼•æ¸…å•**:
```python
# ç‰©å“æŸ¥è¯¢ç´¢å¼•
db.items.create_index([
    ("tenant_id", 1),
    ("scenario_id", 1),
    ("status", 1),
    ("publish_time", -1)
])

# ç”¨æˆ·ç”»åƒæŸ¥è¯¢ç´¢å¼•
db.user_profiles.create_index([
    ("tenant_id", 1),
    ("user_id", 1),
    ("scenario_id", 1)
], unique=True)

# æ ‡ç­¾å¬å›ç´¢å¼•
db.items.create_index([
    ("tenant_id", 1),
    ("scenario_id", 1),
    ("metadata.tags", 1)
])
```

**éªŒè¯æŒ‡æ ‡**:
- æŸ¥è¯¢æ€§èƒ½æå‡ 50%
- æ…¢æŸ¥è¯¢æ•°é‡ä¸‹é™ 80%

---

#### 1.4 å¼‚æ­¥å¹¶è¡Œå¬å›ä¼˜åŒ–ï¼ˆP0ï¼‰

**å½“å‰çŠ¶æ€**: å¯èƒ½æ˜¯ä¸²è¡Œå¬å›

**ä¼˜åŒ–æ–¹æ¡ˆ**: ä½¿ç”¨ `asyncio.gather` å¹¶è¡Œæ‰§è¡Œ

**æ¶‰åŠä¿®æ”¹**:
- `app/services/recommendation/service.py`
- `app/engine/recall/*.py`

**éªŒè¯æŒ‡æ ‡**:
- å¬å›å»¶è¿Ÿï¼š140ms â†’ 50msï¼ˆé™ä½ 64%ï¼‰

---

### Phase 2: ç®—æ³•ä¼˜åŒ–

#### 2.1 DeepFMæ¨¡å‹è®­ç»ƒä¸éƒ¨ç½²ï¼ˆP1ï¼‰

**å®æ–½æ­¥éª¤**:

1. **æ•°æ®å‡†å¤‡**ï¼ˆ1å¤©ï¼‰
   - ä» ClickHouse æ‹‰å–æœ€è¿‘7å¤©è¡Œä¸ºæ•°æ®
   - æ„å»ºè®­ç»ƒæ ·æœ¬ï¼ˆæ­£è´Ÿæ ·æœ¬ 1:4ï¼‰
   - ç‰¹å¾å·¥ç¨‹

2. **æ¨¡å‹è®­ç»ƒ**ï¼ˆ2å¤©ï¼‰
   - ä½¿ç”¨ç°æœ‰ `app/ml/models/deepfm.py`
   - ç¦»çº¿è®­ç»ƒï¼ˆCeleryå®šæ—¶ä»»åŠ¡ï¼‰
   - è¯„ä¼°æŒ‡æ ‡ï¼šAUC > 0.75

3. **åœ¨çº¿éƒ¨ç½²**ï¼ˆ2å¤©ï¼‰
   - é›†æˆåˆ°ç²¾æ’æµç¨‹
   - æ‰¹é‡æ¨ç†ä¼˜åŒ–
   - ONNXåŠ é€Ÿï¼ˆå¯é€‰ï¼‰

**æ–°å¢æ–‡ä»¶**:
- `app/tasks/model_tasks.py` - å¢åŠ  `train_deepfm_daily` ä»»åŠ¡
- `app/engine/ranker/deep_ranker.py` â­
- `app/services/model/model_loader.py` â­

**æ¶‰åŠä¿®æ”¹**:
- `app/services/recommendation/service.py` - é›†æˆæ·±åº¦æ’åº

**éªŒè¯æŒ‡æ ‡**:
- CTR æå‡ 15-20%
- ç¦»çº¿AUC > 0.75

---

#### 2.2 ALSååŒè¿‡æ»¤ä¼˜åŒ–ï¼ˆP1ï¼‰

**å½“å‰çŠ¶æ€**: ç®€å•UserCFï¼Œå®æ—¶è®¡ç®—ç›¸ä¼¼åº¦

**ä¼˜åŒ–æ–¹æ¡ˆ**: ALSçŸ©é˜µåˆ†è§£ + é¢„è®¡ç®—

**æ–°å¢æ–‡ä»¶**:
- `app/engine/recall/als_cf.py` â­
- `app/tasks/cf_tasks.py` - æ¯æ—¥è®­ç»ƒALS

**éªŒè¯æŒ‡æ ‡**:
- å¬å›å»¶è¿Ÿï¼š200ms â†’ 15ms
- å¬å›æ•ˆæœæå‡ 20-30%

---

#### 2.3 å®æ—¶ç‰¹å¾æœåŠ¡ï¼ˆP1ï¼‰

**åŠŸèƒ½**: æä¾›å®æ—¶ç‰¹å¾æŸ¥è¯¢

**æ–°å¢æ–‡ä»¶**:
- `app/services/feature/realtime_feature_service.py` â­

**ç‰¹å¾ç±»åˆ«**:
- ç”¨æˆ·å®æ—¶ç‰¹å¾ï¼šæœ€è¿‘1å°æ—¶æµè§ˆæ¬¡æ•°ã€æ´»è·ƒæ—¶é•¿
- ç‰©å“å®æ—¶ç‰¹å¾ï¼šæœ€è¿‘1å°æ—¶æ›å…‰é‡ã€CTR
- äº¤å‰ç‰¹å¾ï¼šç”¨æˆ·æ˜¯å¦çœ‹è¿‡è¯¥ç‰©å“

**éªŒè¯æŒ‡æ ‡**:
- æ¨¡å‹ç²¾åº¦æå‡ 10%

---

### Phase 3: åŠŸèƒ½å®Œå–„

#### 3.1 MABå®éªŒç³»ç»Ÿï¼ˆP2ï¼‰

**åŠŸèƒ½**: å¤šè‡‚è€è™æœºåŠ¨æ€æµé‡åˆ†é…

**æ–°å¢æ–‡ä»¶**:
- `app/services/experiment/mab.py` â­

**éªŒè¯æŒ‡æ ‡**:
- å®éªŒå‘¨æœŸç¼©çŸ­ 50%

---

## ğŸ› ï¸ å®æ–½å·¥å…·

### å¼€å‘ç¯å¢ƒ

```bash
# æœ¬åœ°å¼€å‘
poetry install
ENV=local poetry run python app/main.py

# æµ‹è¯•
poetry run pytest tests/ -v

# ä»£ç æ£€æŸ¥
poetry run black app/
poetry run flake8 app/
```

### éƒ¨ç½²æµç¨‹

```bash
# 1. æ„å»ºé•œåƒ
docker build -t registry.cn-beijing.aliyuncs.com/lemo_zls/lemo-recommender:v1.1 .
docker push registry.cn-beijing.aliyuncs.com/lemo_zls/lemo-recommender:v1.1

# 2. æ›´æ–°K8séƒ¨ç½²
cd k8s-deploy
./deploy-http-grpc-service.sh
./deploy-worker-service.sh
```

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡

```yaml
# PrometheusæŸ¥è¯¢
# 1. æ¨èå»¶è¿ŸP99
histogram_quantile(0.99, recommendation_latency_seconds)

# 2. ç¼“å­˜å‘½ä¸­ç‡
cache_hit_total / (cache_hit_total + cache_miss_total)

# 3. CTR
clicks_total / impressions_total

# 4. QPS
rate(recommendation_requests_total[5m])
```

### Grafana Dashboard

- æ¨èæ€§èƒ½ç›‘æ§
- ç¼“å­˜ç›‘æ§
- ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§ï¼ˆCTRã€è§‚çœ‹æ—¶é•¿ï¼‰

---

## âœ… éªŒæ”¶æ ‡å‡†

### Phase 1 éªŒæ”¶

- [ ] æ¨èP99å»¶è¿Ÿ < 80ms
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 70%
- [ ] æ— N+1æŸ¥è¯¢é—®é¢˜
- [ ] æ•°æ®åº“æ…¢æŸ¥è¯¢ < 50ms

### Phase 2 éªŒæ”¶

- [ ] DeepFMæ¨¡å‹ä¸Šçº¿
- [ ] ç¦»çº¿AUC > 0.75
- [ ] CTRæå‡ > 10%ï¼ˆABæµ‹è¯•ï¼‰
- [ ] ALSå¬å›å»¶è¿Ÿ < 20ms

### Phase 3 éªŒæ”¶

- [ ] MABå®éªŒç³»ç»Ÿä¸Šçº¿
- [ ] Flinkä½œä¸šè‡ªåŠ¨ä¼¸ç¼©æ­£å¸¸
- [ ] Grafanaç›‘æ§å®Œå–„

---

## ğŸš¨ é£é™©æ§åˆ¶

### å›æ»šç­–ç•¥

1. **ä»£ç å›æ»š**: Git tagæ ‡è®°æ¯æ¬¡éƒ¨ç½²
2. **æ¨¡å‹å›æ»š**: ä¿ç•™æ—§ç‰ˆæœ¬æ¨¡å‹ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢
3. **ABæµ‹è¯•**: æ–°åŠŸèƒ½å…ˆå°æµé‡éªŒè¯

### æ€§èƒ½å›å½’

- æ¯æ¬¡éƒ¨ç½²åè¿è¡Œæ€§èƒ½æµ‹è¯•
- ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡ï¼Œå¼‚å¸¸ç«‹å³å›æ»š

---

## ğŸ“ è”ç³»æ–¹å¼

- **æŠ€æœ¯è´Ÿè´£äºº**: [å¾…å®š]
- **é¡¹ç›®æ–‡æ¡£**: `/docs/`
- **ä»£ç ä»“åº“**: https://github.com/AndrewLiuZhangZong/lemo_recommender

---

**ä¼˜åŒ–åŸåˆ™**: 
1. å…ˆä¼˜åŒ–æ€§èƒ½ï¼Œå†ä¼˜åŒ–ç®—æ³•
2. æ¯æ¬¡ä¼˜åŒ–éƒ½è¦ABæµ‹è¯•
3. ä¿æŒç³»ç»Ÿç¨³å®šæ€§ç¬¬ä¸€
4. æ¸è¿›å¼ä¼˜åŒ–ï¼Œé¿å…å¤§é‡æ„

---

## ğŸ‰ å®æ–½è¿›åº¦

### âœ… Phase 1: æ€§èƒ½ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰

| ä»»åŠ¡ | çŠ¶æ€ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|------|
| 1.1 æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ– | âœ… å®Œæˆ | `app/services/item/service.py` | å·²æœ‰`get_items_by_ids`æ‰¹é‡æŸ¥è¯¢ï¼Œæ— N+1é—®é¢˜ |
| 1.2 å¤šçº§ç¼“å­˜æ¶æ„ | âœ… å®Œæˆ | `app/services/cache/multi_level_cache.py`<br/>`app/services/cache/cache_warmer.py` | å®ç°L1/L2/L3ä¸‰çº§ç¼“å­˜ï¼Œæ”¯æŒç¼“å­˜é¢„çƒ­ |
| 1.3 æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– | âœ… å®Œæˆ | `scripts/optimize_indexes.py` | ä¸º6ä¸ªæ ¸å¿ƒè¡¨åˆ›å»ºå¤åˆç´¢å¼• |
| 1.4 å¼‚æ­¥å¹¶è¡Œå¬å› | âœ… å®Œæˆ | `app/services/recommendation/service.py` | ä½¿ç”¨`asyncio.gather`å¹¶è¡Œæ‰§è¡Œå¬å› |

**æˆæœ**:
- æ¨èæœåŠ¡å·²é›†æˆå¤šçº§ç¼“å­˜ï¼Œæ”¯æŒL1ç»“æœç¼“å­˜
- å¬å›ç­–ç•¥æ”¹ä¸ºå¹¶è¡Œæ‰§è¡Œï¼Œé¢„è®¡å»¶è¿Ÿé™ä½60%
- æ•°æ®åº“ç´¢å¼•è„šæœ¬å¯æ‰§è¡Œï¼š`python scripts/optimize_indexes.py`

### âœ… Phase 2: ç®—æ³•ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰

| ä»»åŠ¡ | çŠ¶æ€ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|------|
| 2.1 DeepFMæ¨¡å‹ | âœ… å®Œæˆ | `app/engine/ranker/deep_ranker.py`<br/>`app/ml/trainer_deepfm.py` | DeepFMæ·±åº¦æ’åºå™¨å·²é›†æˆ |
| 2.2 ALSååŒè¿‡æ»¤ | âœ… å®Œæˆ | `app/engine/recall/als_cf.py` | ALSå¬å›å·²é›†æˆï¼Œæ”¯æŒç¦»çº¿è®­ç»ƒ |
| 2.3 å®æ—¶ç‰¹å¾æœåŠ¡ | âœ… å®Œæˆ | `app/services/feature/realtime_feature_service.py` | æ”¯æŒç”¨æˆ·/ç‰©å“/äº¤å‰ç‰¹å¾æŸ¥è¯¢ |

**æˆæœ**:
- æ¨èæœåŠ¡æ–°å¢`deepfm`æ’åºå™¨å’Œ`als_cf`å¬å›ç­–ç•¥
- å®æ—¶ç‰¹å¾æœåŠ¡å¯ç”¨äºæ¨¡å‹æ¨ç†
- è®­ç»ƒè„šæœ¬ï¼š`DeepFMTrainer`, `ALSCollaborativeFiltering.train()`

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨ä¼˜åŒ–åçš„åŠŸèƒ½

### 1. å¯ç”¨å¤šçº§ç¼“å­˜

æ¨èæœåŠ¡å·²è‡ªåŠ¨å¯ç”¨ç¼“å­˜ï¼Œå¯é€šè¿‡ä»¥ä¸‹APIæŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡ï¼š

```python
# åœ¨æ¨èæœåŠ¡ä¸­æ·»åŠ 
@router.get("/cache/stats")
async def get_cache_stats():
    return recommendation_service.cache.get_cache_stats()
```

### 2. æ‰§è¡Œæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

```bash
cd /Users/edy/PycharmProjects/lemo_recommender
python scripts/optimize_indexes.py optimize
```

### 3. é…ç½®åœºæ™¯ä½¿ç”¨æ–°ç®—æ³•

åœ¨åœºæ™¯é…ç½®ä¸­æŒ‡å®šå¬å›å’Œæ’åºç­–ç•¥ï¼š

```json
{
  "recall": {
    "strategies": [
      {"name": "als_cf", "weight": 0.6, "limit": 200},
      {"name": "hot_items", "weight": 0.4, "limit": 100}
    ]
  },
  "rank": {
    "model": "deepfm"
  }
}
```

### 4. è®­ç»ƒALSæ¨¡å‹

```python
from app.engine.recall.als_cf import ALSCollaborativeFiltering
from app.core.database import get_database
from app.core.redis_client import get_redis_client

als = ALSCollaborativeFiltering(
    db=get_database(),
    redis_client=get_redis_client()
)

result = await als.train(
    tenant_id="your_tenant",
    scenario_id="your_scenario"
)
```

### 5. è®­ç»ƒDeepFMæ¨¡å‹

```python
from app.ml.trainer_deepfm import DeepFMTrainer

trainer = DeepFMTrainer(
    tenant_id="your_tenant",
    scenario_id="your_scenario",
    db=get_database()
)

result = await trainer.train(config={
    "days": 7,
    "batch_size": 256,
    "epochs": 10
})
```

---

## ğŸ“Š æ€§èƒ½æå‡é¢„æœŸ

### å»¶è¿Ÿä¼˜åŒ–

| ç¯èŠ‚ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| å¬å› | 140ms | 50ms | 64% â¬‡ï¸ |
| L1ç¼“å­˜å‘½ä¸­ | - | 5ms | 95% â¬‡ï¸ |
| æ€»ä½“P99 | ~100ms | <50ms | 50% â¬‡ï¸ |

### ç®—æ³•æ•ˆæœ

| æŒ‡æ ‡ | åŸºå‡† | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|------|
| CTR | åŸºå‡†å€¼ | +15% | DeepFMç²¾æ’ |
| å¬å›è¦†ç›–ç‡ | 70% | 90% | ALSå¬å› |
| å¤šæ ·æ€§ | ä¸­ | é«˜ | å¤šè·¯å¬å› |

---

ğŸš€ Let's make it better!

