# ==========================================
# 生产环境配置
# ==========================================

# 应用配置
APP_NAME=Lemo Recommender
DEBUG=false
API_PREFIX=/api/v1
ENV=prod

# 服务配置
HOST=0.0.0.0
PORT=8080

# ==========================================
# 数据存储配置
# ==========================================

# MongoDB（从 K8s ConfigMap 环境变量加载）
# MONGODB_URL=
# MONGODB_DATABASE=

# Redis（从 K8s ConfigMap 环境变量加载）
# REDIS_URL=
# REDIS_PASSWORD=

# ==========================================
# 消息队列与流处理
# ==========================================

# Kafka（从 K8s ConfigMap 环境变量加载）
# KAFKA_BOOTSTRAP_SERVERS=

# ==========================================
# 向量数据库
# ==========================================

# Milvus（从 K8s ConfigMap 环境变量加载）
# MILVUS_ENABLED=true
# MILVUS_HOST=
# MILVUS_PORT=19530
# MILVUS_HTTP_PORT=9091

# ==========================================
# 外部服务配置（gRPC）
# ==========================================

# 租户服务（生产环境 - 请修改为实际值）
TENANT_SERVICE_GRPC_URL=tenant-service.prod.svc.cluster.local:9000

# 用户服务（生产环境 - 请修改为实际值）
USER_SERVICE_GRPC_URL=user-service.prod.svc.cluster.local:9001

# ==========================================
# 安全配置（⚠️ 必须修改！）
# ==========================================

SECRET_KEY=CHANGE_ME_TO_RANDOM_STRING_AT_LEAST_32_CHARS
JWT_SECRET_KEY=CHANGE_ME_TO_RANDOM_STRING_AT_LEAST_32_CHARS

# ==========================================
# 日志配置
# ==========================================

LOG_LEVEL=INFO
LOG_FORMAT=json

# ==========================================
# 监控配置
# ==========================================

ENABLE_METRICS=true
PROMETHEUS_PORT=9090

# ==========================================
# Celery配置
# ==========================================

CELERY_BROKER_URL=redis://:CHANGE_ME@prod-redis-cluster:6379/1
CELERY_RESULT_BACKEND=redis://:CHANGE_ME@prod-redis-cluster:6379/2

# ==========================================
# 推荐引擎配置
# ==========================================

DEFAULT_RECOMMEND_COUNT=20
MAX_RECOMMEND_COUNT=100
RECALL_TIMEOUT_SECONDS=1.0
RANK_TIMEOUT_SECONDS=0.5

# ==========================================
# 生产优化
# ==========================================

# 关闭自动重载
RELOAD=false

# 生产环境禁用Swagger UI（可选）
ENABLE_DOCS=false

# 连接池配置
MONGODB_MAX_POOL_SIZE=100
REDIS_MAX_CONNECTIONS=50

# 超时配置
HTTP_REQUEST_TIMEOUT=30
GRPC_REQUEST_TIMEOUT=5

